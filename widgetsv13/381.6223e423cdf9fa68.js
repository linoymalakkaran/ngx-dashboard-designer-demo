(self.webpackChunkdashboard_widgets=self.webpackChunkdashboard_widgets||[]).push([[381],{8585:(U,c,l)=>{l.r(c),l.d(c,{MOCK_PLATFORM_LOCATION_CONFIG:()=>d,MockLocationStrategy:()=>y,MockPlatformLocation:()=>b,SpyLocation:()=>_});var o=l(8230),f=l(4025),C=l(824);function p(s){return s&&"?"!==s[0]?"?"+s:s}let _=(()=>{class s{constructor(){this.urlChanges=[],this._history=[new g("","",null)],this._historyIndex=0,this._subject=new o.EventEmitter,this._baseHref="",this._platformStrategy=null,this._platformLocation=null,this._urlChangeListeners=[]}setInitialPath(t){this._history[this._historyIndex].path=t}setBaseHref(t){this._baseHref=t}path(){return this._history[this._historyIndex].path}getState(){return this._history[this._historyIndex].state}isCurrentPathEqualTo(t,e=""){const h=t.endsWith("/")?t.substring(0,t.length-1):t;return(this.path().endsWith("/")?this.path().substring(0,this.path().length-1):this.path())==h+(e.length>0?"?"+e:"")}simulateUrlPop(t){this._subject.emit({url:t,pop:!0,type:"popstate"})}simulateHashChange(t){const e=this.prepareExternalUrl(t);this.pushHistory(e,"",null),this.urlChanges.push("hash: "+t),this._subject.emit({url:t,pop:!0,type:"popstate"}),this._subject.emit({url:t,pop:!0,type:"hashchange"})}prepareExternalUrl(t){return t.length>0&&!t.startsWith("/")&&(t="/"+t),this._baseHref+t}go(t,e="",h=null){t=this.prepareExternalUrl(t),this.pushHistory(t,e,h);const n=this._history[this._historyIndex-1];n.path==t&&n.query==e||(this.urlChanges.push(t+(e.length>0?"?"+e:"")),this._notifyUrlChangeListeners(t+p(e),h))}replaceState(t,e="",h=null){t=this.prepareExternalUrl(t);const n=this._history[this._historyIndex];n.path==t&&n.query==e||(n.path=t,n.query=e,n.state=h,this.urlChanges.push("replace: "+t+(e.length>0?"?"+e:"")),this._notifyUrlChangeListeners(t+p(e),h))}forward(){this._historyIndex<this._history.length-1&&(this._historyIndex++,this._subject.emit({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}back(){this._historyIndex>0&&(this._historyIndex--,this._subject.emit({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}historyGo(t=0){const e=this._historyIndex+t;e>=0&&e<this._history.length&&(this._historyIndex=e,this._subject.emit({url:this.path(),state:this.getState(),pop:!0,type:"popstate"}))}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(h=>h(t,e))}subscribe(t,e,h){return this._subject.subscribe({next:t,error:e,complete:h})}normalize(t){return null}pushHistory(t,e,h){this._historyIndex>0&&this._history.splice(this._historyIndex+1),this._history.push(new g(t,e,h)),this._historyIndex=this._history.length-1}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=o.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s})();class g{constructor(r,t,e){this.path=r,this.query=t,this.state=e}}let y=(()=>{class s extends f.LocationStrategy{constructor(){super(),this.internalBaseHref="/",this.internalPath="/",this.internalTitle="",this.urlChanges=[],this._subject=new o.EventEmitter,this.stateChanges=[]}simulatePopState(t){this.internalPath=t,this._subject.emit(new x(this.path()))}path(t=!1){return this.internalPath}prepareExternalUrl(t){return t.startsWith("/")&&this.internalBaseHref.endsWith("/")?this.internalBaseHref+t.substring(1):this.internalBaseHref+t}pushState(t,e,h,n){this.stateChanges.push(t),this.internalTitle=e;const i=h+(n.length>0?"?"+n:"");this.internalPath=i;const a=this.prepareExternalUrl(i);this.urlChanges.push(a)}replaceState(t,e,h,n){this.stateChanges[(this.stateChanges.length||1)-1]=t,this.internalTitle=e;const i=h+(n.length>0?"?"+n:"");this.internalPath=i;const a=this.prepareExternalUrl(i);this.urlChanges.push("replace: "+a)}onPopState(t){this._subject.subscribe({next:t})}getBaseHref(){return this.internalBaseHref}back(){this.urlChanges.length>0&&(this.urlChanges.pop(),this.stateChanges.pop(),this.simulatePopState(this.urlChanges.length>0?this.urlChanges[this.urlChanges.length-1]:""))}forward(){throw"not implemented"}getState(){return this.stateChanges[(this.stateChanges.length||1)-1]}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=o.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s})();class x{constructor(r){this.newUrl=r,this.pop=!0,this.type="popstate"}}const I=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;function m(s,r){let e,h;/^((http[s]?|ftp):\/\/)/.test(s)||(e="http://empty.com/");try{h=new URL(s,e)}catch{const i=I.exec(e||""+s);if(!i)throw new Error(`Invalid URL: ${s} with base: ${r}`);const a=i[4].split(":");h={protocol:i[1],hostname:a[0],port:a[1]||"",pathname:i[5],search:i[6],hash:i[8]}}return h.pathname&&0===h.pathname.indexOf(r)&&(h.pathname=h.pathname.substring(r.length)),{hostname:!e&&h.hostname||"",protocol:!e&&h.protocol||"",port:!e&&h.port||"",pathname:h.pathname||"/",search:h.search||"",hash:h.hash||""}}const d=new o.InjectionToken("MOCK_PLATFORM_LOCATION_CONFIG");let b=(()=>{class s{constructor(t){if(this.baseHref="",this.hashUpdate=new C.Subject,this.urlChangeIndex=0,this.urlChanges=[{hostname:"",protocol:"",port:"",pathname:"/",search:"",hash:"",state:null}],t){this.baseHref=t.appBaseHref||"";const e=this.parseChanges(null,t.startUrl||"http://_empty_/",this.baseHref);this.urlChanges[0]={...e}}}get hostname(){return this.urlChanges[this.urlChangeIndex].hostname}get protocol(){return this.urlChanges[this.urlChangeIndex].protocol}get port(){return this.urlChanges[this.urlChangeIndex].port}get pathname(){return this.urlChanges[this.urlChangeIndex].pathname}get search(){return this.urlChanges[this.urlChangeIndex].search}get hash(){return this.urlChanges[this.urlChangeIndex].hash}get state(){return this.urlChanges[this.urlChangeIndex].state}getBaseHrefFromDOM(){return this.baseHref}onPopState(t){return()=>{}}onHashChange(t){const e=this.hashUpdate.subscribe(t);return()=>e.unsubscribe()}get href(){let t=`${this.protocol}//${this.hostname}${this.port?":"+this.port:""}`;return t+=`${"/"===this.pathname?"":this.pathname}${this.search}${this.hash}`,t}get url(){return`${this.pathname}${this.search}${this.hash}`}parseChanges(t,e,h=""){return t=JSON.parse(JSON.stringify(t)),{...m(e,h),state:t}}replaceState(t,e,h){const{pathname:n,search:i,state:a,hash:u}=this.parseChanges(t,h);this.urlChanges[this.urlChangeIndex]={...this.urlChanges[this.urlChangeIndex],pathname:n,search:i,hash:u,state:a}}pushState(t,e,h){const{pathname:n,search:i,state:a,hash:u}=this.parseChanges(t,h);this.urlChangeIndex>0&&this.urlChanges.splice(this.urlChangeIndex+1),this.urlChanges.push({...this.urlChanges[this.urlChangeIndex],pathname:n,search:i,hash:u,state:a}),this.urlChangeIndex=this.urlChanges.length-1}forward(){const t=this.url,e=this.hash;this.urlChangeIndex<this.urlChanges.length&&this.urlChangeIndex++,this.scheduleHashUpdate(e,t)}back(){const t=this.url,e=this.hash;this.urlChangeIndex>0&&this.urlChangeIndex--,this.scheduleHashUpdate(e,t)}historyGo(t=0){const e=this.url,h=this.hash,n=this.urlChangeIndex+t;n>=0&&n<this.urlChanges.length&&(this.urlChangeIndex=n),this.scheduleHashUpdate(h,e)}getState(){return this.state}scheduleHashUpdate(t,e){t!==this.hash&&function S(s){Promise.resolve(null).then(s)}(()=>this.hashUpdate.next({type:"hashchange",state:null,oldUrl:e,newUrl:this.url}))}}return s.\u0275fac=function(t){return new(t||s)(o.\u0275\u0275inject(d,8))},s.\u0275prov=o.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s})()}}]);